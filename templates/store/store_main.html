{% extends "base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="{% static 'css/store/store.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/store/purchase_modal.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/store/gift_modal.css' %}">
<link href="https://fonts.googleapis.com/css2?family=Arima:wght@100..700&family=Oleo+Script:wght@400;700&display=swap" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

{% endblock %}

{% block content %}


<div class="store-content">
    <div class="store_spec_wrap">
        
        <div class="spec-image-content">
            <img id="spec_image" src="{% static 'img/store/감자.png' %}"> 
        </div>
        
        <div class="spec_info_name">
            <p id="spec_name">감자빵</p>
        </div>

        <div class="spec_info_category">
            <p id="spec_category">음식</p>
        </div>
        
        <div class="spec_info_information">
            <p id="information">감자처럼 생긴 빵. 고구마 맛이 난다.</p>
        </div>
        
        <div class="spec_info_purchase_bar">
            <div class="spec_info_price">
                <img src="{% static 'img/갈레온.png' %}" class="price-currency-icon">
                <p id="item_price">100 G</p>
            </div>
            <div class="spec_info_func">
                <img src="{% static 'img/카트.png' %}" class="purchase-icon">
                <img src="{% static 'img/선물.png' %}" class="gift-icon">
            </div> 
        </div>
        
    </div>

    <div class="store_info_wrap">
        <div class="tab_btns">
            <button id="store_btn" class="active" onclick="showItemList('store')">상점</button>
            <button id="ingredient_btn" onclick="showItemList('ingredient')">재료</button>
        </div>

        <div class="item_list_container">
            <div class="item_header">
                <img src="{% static 'img/store/store_header.png' %}" alt="">
            </div>

            <div class="item_list" id="store_list">
                {% for item in items %}
                <div class="item_card" onclick="updateItemSpec('{{ item.itemName|escapejs }}', '{{ item.itemCategory|escapejs }}', '{{ item.itemInfo|escapejs }}', '{{ item.itemPrice }}')">
                    <div class="item_content_wrap">
                        <div class="item_card_image_area">
                            <img src="{% static 'img/store/' %}{{item.itemName}}.png" class="item_card_image">
                        </div>
                        
                        <p class="item_card_name">{{ item.itemName }}</p>
                    </div>

                    <div class="item_card_price_bar">
                        <p class="item_card_price">{{ item.itemPrice }} G</p>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="item_list" id="ingredient_list">
                {% for item in ingredients %}
                <div class="item_card" onclick="updateItemSpec('{{ item.itemName|escapejs }}', '{{ item.itemCategory|escapejs }}', '{{ item.itemInfo|escapejs }}', '{{ item.itemPrice }}')">
                    <div class="item_content_wrap">
                        <div class="item_card_image_area">
                            <img src="{% static 'img/store/' %}{{item.itemName}}.png" class="item_card_image">
                        </div>
                        
                        <p class="item_card_name">{{ item.itemName }}</p>
                    </div>

                    <div class="item_card_price_bar">
                        <p class="item_card_price">{{ item.itemPrice }} G</p>
                    </div>
                </div>
                {% endfor %}
            </div>

        </div>

    </div>

<div>


<div class=""></div>
<div class=""></div>
<div class=""></div>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>

<script>

    function updateItemSpec(name, category, info, price, imagePath) {
        document.getElementById('spec_image').src = `{% static 'img/store/' %}${name}.png`;
        document.getElementById('spec_name').textContent = name;
        document.getElementById('spec_category').textContent = category;
        document.getElementById('information').textContent = info;
        document.getElementById('item_price').textContent = `${price} G`;
    }

    function showItemList(listType) {
        const storeList = document.getElementById('store_list');
        const ingredientList = document.getElementById('ingredient_list');
        const storeBtn = document.getElementById('store_btn');
        const ingredientBtn = document.getElementById('ingredient_btn');

        if (listType === 'store') {
            storeList.style.display = 'grid'; 
            ingredientList.style.display = 'none'; 
            
            // 버튼 활성화 클래스 전환
            storeBtn.classList.add('active');
            ingredientBtn.classList.remove('active');
        } else if (listType === 'ingredient') {
            storeList.style.display = 'none'; // 상점 목록 숨기기
            ingredientList.style.display = 'grid'; // 재료 목록 보이기
            
            // 버튼 활성화 클래스 전환
            storeBtn.classList.remove('active');
            ingredientBtn.classList.add('active');
        }
    }

</script>



{% endblock %}